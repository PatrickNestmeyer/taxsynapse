\hypertarget{class_import_1_1zugferd_handler}{}\section{Import.\+zugferd\+Handler Class Reference}
\label{class_import_1_1zugferd_handler}\index{Import.\+zugferd\+Handler@{Import.\+zugferd\+Handler}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
Invoice \hyperlink{class_import_1_1zugferd_handler_aea79c23595f003c943e908c95276ecf9}{read\+Invoice} (String Path)  throws I\+O\+Exception
\item 
void \hyperlink{class_import_1_1zugferd_handler_abd148f2b6346f1d0942b06e7941124be}{read\+Invoice} (String Path, Hash\+Map$<$ String, String $>$ Filenames, List$<$ Invoice $>$ Invoice\+List, final boolean set\+Logging, final boolean supress\+Invalid)  throws Exception 
\item 
void \hyperlink{class_import_1_1zugferd_handler_aa5fbab8b4a7835f2b13167452f9d17db}{remove\+Invalid} (List$<$ Invoice $>$ Invoice\+List)
\item 
boolean \hyperlink{class_import_1_1zugferd_handler_a6999d186193b120650a5d24a49d10c6c}{has\+Invalid} (List$<$ Invoice $>$ Invoice\+List)
\item 
Set$<$ Constraint\+Violation$<$ Invoice $>$ $>$ \hyperlink{class_import_1_1zugferd_handler_acf26740b73f820812fadb01ccf712dd2}{get\+Violations} (Invoice invoice)
\item 
void \hyperlink{class_import_1_1zugferd_handler_ae8ae1fcc05ebddf4d2b53c8daeda7b00}{print\+Violations} (List$<$ Invoice $>$ Invoice\+List)
\item 
void \hyperlink{class_import_1_1zugferd_handler_aadb33b773805373add19d92eb713831b}{print\+Single\+Invoice\+Violations} (Invoice invoice)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{class_import_1_1zugferd_handler}{zugferd\+Handler} \hyperlink{class_import_1_1zugferd_handler_ad3acd84340c8a5fcb2c01a2636979786}{get\+Instance} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 21 of file zugferd\+Handler.\+java.



\subsection{Member Function Documentation}
\index{Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}!get\+Instance@{get\+Instance}}
\index{get\+Instance@{get\+Instance}!Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}}
\subsubsection[{\texorpdfstring{get\+Instance()}{getInstance()}}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf zugferd\+Handler} Import.\+zugferd\+Handler.\+get\+Instance (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}\hypertarget{class_import_1_1zugferd_handler_ad3acd84340c8a5fcb2c01a2636979786}{}\label{class_import_1_1zugferd_handler_ad3acd84340c8a5fcb2c01a2636979786}


Definition at line 27 of file zugferd\+Handler.\+java.


\begin{DoxyCode}
27                                               \{
28         \textcolor{keywordflow}{if}(uniqueInstance == null) \{
29             \textcolor{keyword}{synchronized}(zugferdHandler.class)\{
30                 \textcolor{keywordflow}{if}(uniqueInstance == null)\{
31                     uniqueInstance = \textcolor{keyword}{new} zugferdHandler();
32                 \}
33             \}
34         \}
35         \textcolor{keywordflow}{return} uniqueInstance;
36     \}
\end{DoxyCode}
\index{Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}!get\+Violations@{get\+Violations}}
\index{get\+Violations@{get\+Violations}!Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}}
\subsubsection[{\texorpdfstring{get\+Violations(\+Invoice invoice)}{getViolations(Invoice invoice)}}]{\setlength{\rightskip}{0pt plus 5cm}Set$<$Constraint\+Violation$<$Invoice$>$ $>$ Import.\+zugferd\+Handler.\+get\+Violations (
\begin{DoxyParamCaption}
\item[{Invoice}]{invoice}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_import_1_1zugferd_handler_acf26740b73f820812fadb01ccf712dd2}{}\label{class_import_1_1zugferd_handler_acf26740b73f820812fadb01ccf712dd2}


Definition at line 128 of file zugferd\+Handler.\+java.


\begin{DoxyCode}
128                                                                             \{
129         
130         InvoiceValidator invoiceValidator = \textcolor{keyword}{new} InvoiceValidator();
131        
132         Set<ConstraintViolation<Invoice>> violations = invoiceValidator.validate(invoice);
133         
134         \textcolor{keywordflow}{return} violations;
135     \}
\end{DoxyCode}
\index{Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}!has\+Invalid@{has\+Invalid}}
\index{has\+Invalid@{has\+Invalid}!Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}}
\subsubsection[{\texorpdfstring{has\+Invalid(\+List$<$ Invoice $>$ Invoice\+List)}{hasInvalid(List< Invoice > InvoiceList)}}]{\setlength{\rightskip}{0pt plus 5cm}boolean Import.\+zugferd\+Handler.\+has\+Invalid (
\begin{DoxyParamCaption}
\item[{List$<$ Invoice $>$}]{Invoice\+List}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_import_1_1zugferd_handler_a6999d186193b120650a5d24a49d10c6c}{}\label{class_import_1_1zugferd_handler_a6999d186193b120650a5d24a49d10c6c}


Definition at line 119 of file zugferd\+Handler.\+java.


\begin{DoxyCode}
119                                                         \{
120         
121         \textcolor{keywordflow}{for} (Invoice temp : InvoiceList) \{
122             \textcolor{keywordflow}{if}(this.\hyperlink{class_import_1_1zugferd_handler_acf26740b73f820812fadb01ccf712dd2}{getViolations}(temp) != null)
123                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};
124         \}
125         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
126     \}
\end{DoxyCode}
\index{Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}!print\+Single\+Invoice\+Violations@{print\+Single\+Invoice\+Violations}}
\index{print\+Single\+Invoice\+Violations@{print\+Single\+Invoice\+Violations}!Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}}
\subsubsection[{\texorpdfstring{print\+Single\+Invoice\+Violations(\+Invoice invoice)}{printSingleInvoiceViolations(Invoice invoice)}}]{\setlength{\rightskip}{0pt plus 5cm}void Import.\+zugferd\+Handler.\+print\+Single\+Invoice\+Violations (
\begin{DoxyParamCaption}
\item[{Invoice}]{invoice}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_import_1_1zugferd_handler_aadb33b773805373add19d92eb713831b}{}\label{class_import_1_1zugferd_handler_aadb33b773805373add19d92eb713831b}


Definition at line 151 of file zugferd\+Handler.\+java.


\begin{DoxyCode}
151                                                              \{
152         
153         InvoiceValidator invoiceValidator = \textcolor{keyword}{new} InvoiceValidator();
154         
155         Set<ConstraintViolation<Invoice>> violations = invoiceValidator.validate(invoice);
156         
157         \textcolor{keywordflow}{for} (ConstraintViolation<Invoice> violation : violations) \{
158              System.out.println((violation.getMessage() + \textcolor{stringliteral}{" at: "} + violation.getPropertyPath()));
159            \}
160     \}
\end{DoxyCode}
\index{Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}!print\+Violations@{print\+Violations}}
\index{print\+Violations@{print\+Violations}!Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}}
\subsubsection[{\texorpdfstring{print\+Violations(\+List$<$ Invoice $>$ Invoice\+List)}{printViolations(List< Invoice > InvoiceList)}}]{\setlength{\rightskip}{0pt plus 5cm}void Import.\+zugferd\+Handler.\+print\+Violations (
\begin{DoxyParamCaption}
\item[{List$<$ Invoice $>$}]{Invoice\+List}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_import_1_1zugferd_handler_ae8ae1fcc05ebddf4d2b53c8daeda7b00}{}\label{class_import_1_1zugferd_handler_ae8ae1fcc05ebddf4d2b53c8daeda7b00}


Definition at line 137 of file zugferd\+Handler.\+java.


\begin{DoxyCode}
137                                                           \{
138         
139         InvoiceValidator invoiceValidator = \textcolor{keyword}{new} InvoiceValidator();
140         
141         Set<ConstraintViolation<Invoice>> violations;
142         
143         \textcolor{keywordflow}{for} (Invoice temp : InvoiceList) \{
144             violations = invoiceValidator.validate(temp);
145             \textcolor{keywordflow}{for} (ConstraintViolation<Invoice> violation : violations) \{
146                  System.out.println((violation.getMessage() + \textcolor{stringliteral}{" at: "} + violation.getPropertyPath()));
147             \}
148         \}
149     \}
\end{DoxyCode}
\index{Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}!read\+Invoice@{read\+Invoice}}
\index{read\+Invoice@{read\+Invoice}!Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}}
\subsubsection[{\texorpdfstring{read\+Invoice(\+String Path)}{readInvoice(String Path)}}]{\setlength{\rightskip}{0pt plus 5cm}Invoice Import.\+zugferd\+Handler.\+read\+Invoice (
\begin{DoxyParamCaption}
\item[{String}]{Path}
\end{DoxyParamCaption}
) throws I\+O\+Exception\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_import_1_1zugferd_handler_aea79c23595f003c943e908c95276ecf9}{}\label{class_import_1_1zugferd_handler_aea79c23595f003c943e908c95276ecf9}


Definition at line 38 of file zugferd\+Handler.\+java.


\begin{DoxyCode}
38                                                               \{
39         
40         PdfHandler handler = \textcolor{keyword}{new} PdfHandler();
41         
42         FileInputStream input = \textcolor{keyword}{new} FileInputStream(\textcolor{keyword}{new} File(Path));
43         
44         Invoice invoice = handler.extractInvoice(input);
45         
46         \textcolor{keywordflow}{if}(invoice != null)
47             \textcolor{keywordflow}{return} invoice;
48         \textcolor{keywordflow}{else}
49             \textcolor{keywordflow}{return} null;
50     \}
\end{DoxyCode}
\index{Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}!read\+Invoice@{read\+Invoice}}
\index{read\+Invoice@{read\+Invoice}!Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}}
\subsubsection[{\texorpdfstring{read\+Invoice(\+String Path, Hash\+Map$<$ String, String $>$ Filenames, List$<$ Invoice $>$ Invoice\+List, final boolean set\+Logging, final boolean supress\+Invalid)}{readInvoice(String Path, HashMap< String, String > Filenames, List< Invoice > InvoiceList, final boolean setLogging, final boolean supressInvalid)}}]{\setlength{\rightskip}{0pt plus 5cm}void Import.\+zugferd\+Handler.\+read\+Invoice (
\begin{DoxyParamCaption}
\item[{String}]{Path, }
\item[{Hash\+Map$<$ String, String $>$}]{Filenames, }
\item[{List$<$ Invoice $>$}]{Invoice\+List, }
\item[{final boolean}]{set\+Logging, }
\item[{final boolean}]{supress\+Invalid}
\end{DoxyParamCaption}
) throws Exception\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_import_1_1zugferd_handler_abd148f2b6346f1d0942b06e7941124be}{}\label{class_import_1_1zugferd_handler_abd148f2b6346f1d0942b06e7941124be}


Definition at line 52 of file zugferd\+Handler.\+java.


\begin{DoxyCode}
52                                                                                                            
                                                                           \{
53         \textcolor{comment}{//Rekursive => elem can be a folder or a file }
54         Files.walk(Paths.get(Path)).forEach(elem -> \{
55             String fileName = elem.getFileName().toString();
56             String path = elem.toString();
57             \textcolor{keywordflow}{try}\{
58                 \textcolor{keywordflow}{if} (Files.isDirectory(elem))\{
59                     \textcolor{keywordflow}{if}(setLogging)\{ System.out.println(\textcolor{stringliteral}{"recursive entry. elem is just a directory."}); \}
60                 \}\textcolor{keywordflow}{else}\{  \textcolor{keywordflow}{if}(Files.isRegularFile(elem))\{
61                     \textcolor{keywordflow}{if}(Files.probeContentType(elem).intern() == \textcolor{stringliteral}{"application/pdf"})\{
62                         Invoice invoice = this.\hyperlink{class_import_1_1zugferd_handler_aea79c23595f003c943e908c95276ecf9}{readInvoice}(path);
63                         \textcolor{keywordflow}{if}(invoice != null) \{
64                             \textcolor{keywordtype}{boolean} add = \textcolor{keyword}{false};
65                             \textcolor{keywordflow}{if}(supressInvalid)\{
66                                 Set<ConstraintViolation<Invoice>> violations = this.
      \hyperlink{class_import_1_1zugferd_handler_acf26740b73f820812fadb01ccf712dd2}{getViolations}(invoice);
67                                 \textcolor{keywordflow}{if}((violations.size() > 0))\{
68                                     \textcolor{keywordflow}{if}(setLogging)\{ System.out.println(\textcolor{stringliteral}{"Violatins found in: "} + fileName); 
      \}
69                                     \textcolor{keywordflow}{if}(setLogging)\{ 
70                                         violations.forEach(vio -> \{
71                                             System.out.println(vio.getExecutableReturnValue() + \textcolor{stringliteral}{"|"} + vio.
      getLeafBean() + \textcolor{stringliteral}{"|"} + vio.getInvalidValue() + \textcolor{stringliteral}{"|"} + vio.getMessage());
72                                         \});
73                                     \}
74                                     add = \textcolor{keyword}{false};
75                                 \}\textcolor{keywordflow}{else}\{
76                                     add = \textcolor{keyword}{true};
77                                 \}
78                             \}\textcolor{keywordflow}{else}\{
79                                 add = \textcolor{keyword}{true};
80                             \}
81                             \textcolor{keywordflow}{if}(add)\{
82                                 \textcolor{keywordflow}{if}(setLogging)\{ System.out.println(fileName + \textcolor{stringliteral}{" is valid."} ); \}
83                                 InvoiceList.add(invoice);
84                                 Filenames.put(CSVBookingHandler.getInstance().getFileNamesKey(invoice.
      getTrade().getAgreement().getBuyer().getName(), invoice.getHeader().getInvoiceNumber()), fileName);
85                                 \textcolor{keywordflow}{if}(setLogging)\{ System.out.println( fileName + \textcolor{stringliteral}{" added to the list."}); \}
86                             \}
87                         \}
88                     \}\textcolor{keywordflow}{else}\{
89                         \textcolor{keywordflow}{if}(setLogging)\{ System.out.println(\textcolor{stringliteral}{"a non pdf file was found. Ignoring..."}); \}
90                     \}
91                 \}\textcolor{keywordflow}{else}\{
92                     \textcolor{keywordflow}{if}(setLogging)\{ System.out.println(\textcolor{stringliteral}{"elem is neither a directory nor a file. Ignoring...
      "}); \}
93                 \}\}
94             \}\textcolor{keywordflow}{catch}(TransformationException tfe)\{
95                 \textcolor{keywordflow}{if}(setLogging)\{ 
96                     System.out.println(fileName + \textcolor{stringliteral}{" caused an Exception while transforming PDF/ZUGFERD to
       Java/Invoice"});
97                     System.out.println(\textcolor{stringliteral}{"Message: "} + tfe.getMessage());
98                 \}
99             \}\textcolor{keywordflow}{catch}(IOException ioe)\{
100                 \textcolor{keywordflow}{if}(setLogging)\{ 
101                     System.out.println(fileName + \textcolor{stringliteral}{" caused an IOException."});
102                     System.out.println(\textcolor{stringliteral}{"Message: "} + ioe.getMessage());
103                 \}
104             \}\textcolor{keywordflow}{catch}(Exception e)\{
105                 \textcolor{keywordflow}{if}(setLogging)\{ 
106                     System.out.println(fileName + \textcolor{stringliteral}{" caused an Exception."});
107                     System.out.println(\textcolor{stringliteral}{"Message: "} + e.getMessage());
108                 \}
109             \}
110         \});
111     \}
\end{DoxyCode}
\index{Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}!remove\+Invalid@{remove\+Invalid}}
\index{remove\+Invalid@{remove\+Invalid}!Import\+::zugferd\+Handler@{Import\+::zugferd\+Handler}}
\subsubsection[{\texorpdfstring{remove\+Invalid(\+List$<$ Invoice $>$ Invoice\+List)}{removeInvalid(List< Invoice > InvoiceList)}}]{\setlength{\rightskip}{0pt plus 5cm}void Import.\+zugferd\+Handler.\+remove\+Invalid (
\begin{DoxyParamCaption}
\item[{List$<$ Invoice $>$}]{Invoice\+List}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{class_import_1_1zugferd_handler_aa5fbab8b4a7835f2b13167452f9d17db}{}\label{class_import_1_1zugferd_handler_aa5fbab8b4a7835f2b13167452f9d17db}


Definition at line 114 of file zugferd\+Handler.\+java.


\begin{DoxyCode}
114                                                         \{
115         
116         InvoiceList.removeIf(i -> \hyperlink{class_import_1_1zugferd_handler_acf26740b73f820812fadb01ccf712dd2}{getViolations}(i).size() <= 0);
117     \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+Users/\+Denis/workspace/taxsynapse/src/main/java/\+Import/\hyperlink{zugferd_handler_8java}{zugferd\+Handler.\+java}\end{DoxyCompactItemize}
